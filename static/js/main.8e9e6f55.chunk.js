(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(46)},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(21),c=a.n(s),i=a(47),l=(a(31),a(50)),o=a(49),u=a(24),p=a(48),m=a(5),d=a.n(m),h=a(6),f=a(8),g=a(9),v=a(11),y=a(10),b=a(12),E=a(22),w=a.n(E),k=function(){var e=Object(h.a)(d.a.mark(function e(t){var a,r,n,s,c,i,l,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.api,r=t.page,n=void 0===r?1:r,s=t.query,c=void 0===s?"":s,(i=new URLSearchParams).set("page",n),i.set("search",c),e.next=6,fetch("".concat("https://swapi.co/api/").concat(a,"/?").concat(i.toString()));case 6:return l=e.sent,e.next=9,l.json();case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(d.a.mark(function e(t,a){var r,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://swapi.co/api/").concat(t,"/").concat(a,"/"));case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(h.a)(d.a.mark(function e(t){var a,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),S={people:{name:{title:"name",isSortable:!0,isSearchable:!0},height:{title:"height",isSortable:!0},birth_year:{title:"birth year"}},films:{title:{title:"name",isSortable:!0,isSearchable:!0},episode_id:{title:"episode",isSortable:!0},opening_crawl:{title:"opening crawl"},release_date:{title:"release",isSortable:!0}},planets:{name:{title:"name",isSortable:!0,isSearchable:!0},diameter:{title:"diameter",isSortable:!0},terrain:{title:"terrain"}},species:{name:{title:"name",isSortable:!0,isSearchable:!0},average_lifespan:{title:"average lifespan",isSortable:!0},skin_colors:{title:"terrain"}},starships:{name:{title:"name",isSortable:!0,isSearchable:!0},cost_in_credits:{title:"cost (credits)",isSortable:!0},model:{title:"model"}},vehicles:{name:{title:"name",isSortable:!0,isSearchable:!0},cost_in_credits:{title:"cost (credits)",isSortable:!0},model:{title:"model"}}},P=["created","edited","url","homeworld"],j=["characters","pilots","residents","people","films","planets","species","starships","vehicles"],_=a(23),N=function(e){var t=e.config,a=e.api,r=e.onHeaderClick;return n.a.createElement("tr",{className:"thead-dark"},a&&Object.entries(t[a]).map(function(e){var t=Object(_.a)(e,2),s=t[0],c=t[1];return n.a.createElement("th",{key:s,className:c.isSortable?"sortable-column":"",onClick:function(){return r(a,s)}},c.title)}))},C=function(e){var t=e.prop,a=e.index,r=e.api,s=e.item;return n.a.createElement("td",null,"name"===t||"title"===t?n.a.createElement(l.a,{to:"/".concat(r,"/").concat(a)},s[t]):s[t])},D=function(e){var t=e.visibleItems,a=e.config,r=e.api;return t&&t.map(function(e){return n.a.createElement("tr",{key:e.url},Object.keys(a[r]).map(function(t){var a=e.url.match(/\d+/g)[0];return n.a.createElement(C,{key:t,prop:t,index:a,api:r,item:e})}))})},L=function(e){function t(){var e,a;Object(f.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(v.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={sortColumn:null,sortAsc:!0,api:""},a.handleHeaderClick=function(e,t){a.props.config[e][t].isSortable&&a.setState(function(e){var a=e.sortColumn,r=e.sortAsc;return{sortColumn:t,sortAsc:a!==t||!r}})},a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.api,r=t.data,s=t.config,c=this.state.sortAsc?1:-1,i=this.state.sortColumn?r.sort(function(t,a){var r=t[e.state.sortColumn],n=a[e.state.sortColumn];return"number"===typeof r?c*(r-n):c*r.localeCompare(n)}):r;return n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement(N,{config:s,api:a,onHeaderClick:this.handleHeaderClick})),n.a.createElement("tbody",null,n.a.createElement(D,{config:s,api:a,visibleItems:i})))}}]),t}(r.Component),q=function(e){for(var t=e.location,a=(e.page,e.count),r=e.perPage,s=void 0===r?10:r,c=Math.ceil(a/s),i=[],o=1;o<c;o++)i.push(o);var u=function(e){var a=new URLSearchParams(t.search);return a.set("page",e),a.toString()};return n.a.createElement("div",{className:"Pagination"},n.a.createElement("nav",{"data-pagination":!0},n.a.createElement("ul",null,i.map(function(e){return n.a.createElement("li",{className:"current"},n.a.createElement(l.a,{key:e,to:{pathname:t.pathname,search:u(e)}},e))}))))},U=function(e){function t(){var e,a;Object(f.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(v.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={data:null,api:"",page:0,count:0,location:"",query:"",inputValue:""},a.updatePageFromURL=function(){var e=a.props.match.params.api,t=a.props.location,r=new URLSearchParams(t.search),n=+r.get("page")||1,s=r.get("search")||"";s||window.history.replaceState({},"",t.pathname),e===a.state.api&&n===a.state.page&&s===a.state.query||a.setState({api:e,page:n,location:t,query:s},a.loadData)},a.loadData=Object(h.a)(d.a.mark(function e(){var t,r,n,s,c,i,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,r=t.api,n=t.page,s=t.query,e.next=3,k({api:r,page:n,query:s});case 3:c=e.sent,i=c.count,l=c.results,a.setState({data:l,count:i});case 7:case"end":return e.stop()}},e)})),a.updateInputValue=function(e){a.setState({inputValue:e.target.value}),a.updateQuery(e.target.value)},a.updateQuery=w()(function(e){var t=a.setParams({query:e});a.props.history.push("?".concat(t)),a.setState({query:e})},1e3),a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.updatePageFromURL()}},{key:"componentDidUpdate",value:function(){this.updatePageFromURL()}},{key:"setParams",value:function(e){var t=e.query,a=new URLSearchParams;return a.set("search",t||""),a.toString()}},{key:"render",value:function(){var e=this.state,t=e.api,a=e.page,r=e.count,s=e.location,c=e.query,i=this.state.data||[];return t?n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{autocomplete:"off"},n.a.createElement("label",{for:"search",class:"Search"},n.a.createElement("input",{value:this.state.inputValue,onChange:this.updateInputValue,type:"text",id:"search",placeholder:"\xa0"}),n.a.createElement("span",{class:"label"},"Search ..."),n.a.createElement("span",{class:"border"}))),n.a.createElement(q,{location:s,count:r,page:a,query:c}),n.a.createElement(L,{api:t,data:i,config:S})):n.a.createElement("div",{className:"loading"})}}]),t}(r.Component),R=a(25),A=function(e){var t=e.category,a=e.index;return n.a.createElement("img",{className:"Page-Category__image",src:"https://starwars-visualguide.com/assets/img/".concat(/(people|pilots|residents)/gi.test(t)?"characters":t,"/").concat(a,".jpg"),alt:"Star Wars",onError:function(e){e.target.onError=null,e.target.src="https://starwars-visualguide.com/assets/img/placeholder-small.jpg"}.bind()})},F=function(e){var t=e.category,a=e.index,r=e.item;return n.a.createElement("p",null,n.a.createElement(l.a,{to:"/".concat(/(characters|people|pilots|residents)/gi.test(t)?"people":t,"/").concat(a)},r.name||r.title))},I=function(e){var t=e.data,a=e.category;return n.a.createElement("div",{className:"Page-Category"},n.a.createElement("div",{className:"Page-Category__title"},n.a.createElement("strong",null,"Related ",a)),t[a].map(function(e,t){var r=e.url?e.url.match(/\d+/g)[0]:e.match(/\d+/g)[0];return n.a.createElement("div",{key:t,className:"Page-Category__box"},n.a.createElement(A,{category:a,index:r}),n.a.createElement(F,{category:a,index:r,item:e}))}))},V=function(e){var t=e.data,a=e.dataDisplayOut;return n.a.createElement("div",{className:"grid"},t&&a.map(function(e,a){return t.hasOwnProperty(e)&&0!==t[e].length&&n.a.createElement(I,{key:a,data:t,category:e})}))},H=function(e){var t=e.api,a=e.id;return n.a.createElement("div",{className:"Page__img-big"},n.a.createElement("img",{src:"https://starwars-visualguide.com/assets/img/".concat("people"!==t?t:"characters","/").concat(a,".jpg"),alt:"star wars",onError:function(e){e.target.onError=null,e.target.src="https://starwars-visualguide.com/assets/img/big-placeholder.jpg",e.target.height="400",e.target.width="100"}.bind(void 0)}))},M=function(e){e.api,e.id;var t=e.data,a=e.dataDisplayNot,r=e.dataDisplayOut;return n.a.createElement("div",{className:"Page__data"},t?Object.keys(t).map(function(e,s){return a.includes(e)||r.includes(e)||"unknown"===t[e]?null:"name"===e||"title"===e?n.a.createElement("h1",{key:s},t[e]):n.a.createElement("p",{key:e},n.a.createElement("span",{className:"opening_crawl"===e?"Page__key":""},e.replace("_"," "),":"),t[e])}):n.a.createElement("div",{className:"loading"}))},J=function(e){var t=e.api,a=e.id,r=e.data,s=e.dataDisplayNot,c=e.dataDisplayOut;return n.a.createElement("div",{className:"Page"},n.a.createElement(H,{api:t,id:a}),n.a.createElement(M,{api:t,id:a,data:r,dataDisplayNot:s,dataDisplayOut:c}))},Q=function(e){function t(){var e,a;Object(f.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(v.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={configCategories:null,data:null,api:"",id:""},a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(){var e=this.props.match.params,t=e.id,a=e.api;this.state.id===t&&this.state.api===a||this.loadData()}},{key:"loadData",value:function(){var e=Object(h.a)(d.a.mark(function e(){var t,a,r,n,s,c,i,l,o,u,p,m,h;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params,a=t.api,r=t.id,e.next=3,x(a,r);case 3:if(n=e.sent,e.t0=n.hasOwnProperty("films"),!e.t0){e.next=9;break}return e.next=8,Promise.all(n.films.map(function(e){return O(e)}));case 8:e.t0=e.sent;case 9:if(s=e.t0,e.t1=n.hasOwnProperty("species"),!e.t1){e.next=15;break}return e.next=14,Promise.all(n.species.map(function(e){return O(e)}));case 14:e.t1=e.sent;case 15:if(c=e.t1,e.t2=n.hasOwnProperty("vehicles"),!e.t2){e.next=21;break}return e.next=20,Promise.all(n.vehicles.map(function(e){return O(e)}));case 20:e.t2=e.sent;case 21:if(i=e.t2,e.t3=n.hasOwnProperty("starships"),!e.t3){e.next=27;break}return e.next=26,Promise.all(n.starships.map(function(e){return O(e)}));case 26:e.t3=e.sent;case 27:if(l=e.t3,e.t4=n.hasOwnProperty("characters"),!e.t4){e.next=33;break}return e.next=32,Promise.all(n.characters.map(function(e){return O(e)}));case 32:e.t4=e.sent;case 33:if(o=e.t4,e.t5=n.hasOwnProperty("people"),!e.t5){e.next=39;break}return e.next=38,Promise.all(n.people.map(function(e){return O(e)}));case 38:e.t5=e.sent;case 39:if(u=e.t5,e.t6=n.hasOwnProperty("residents"),!e.t6){e.next=45;break}return e.next=44,Promise.all(n.residents.map(function(e){return O(e)}));case 44:e.t6=e.sent;case 45:if(p=e.t6,e.t7=n.hasOwnProperty("planets"),!e.t7){e.next=51;break}return e.next=50,Promise.all(n.planets.map(function(e){return O(e)}));case 50:e.t7=e.sent;case 51:if(m=e.t7,e.t8=n.hasOwnProperty("pilots"),!e.t8){e.next=57;break}return e.next=56,Promise.all(n.pilots.map(function(e){return O(e)}));case 56:e.t8=e.sent;case 57:h=e.t8,this.setState({id:r,api:a,data:Object(R.a)({},n,{films:s||[],species:c||[],vehicles:i||[],starships:l||[],characters:o||[],planets:m||[],people:u||[],residents:p||[],pilots:h||[]})});case 59:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.data,t=this.state,a=t.api,r=t.id;return n.a.createElement("div",null,n.a.createElement(J,{api:a,id:r,data:e,dataDisplayNot:P,dataDisplayOut:j}),n.a.createElement(V,{data:e,dataDisplayOut:j}))}}]),t}(r.Component),W=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"grid"},Object.keys(S).map(function(e,t){return n.a.createElement(l.a,{key:t,to:"/".concat(e),className:"List__item"},n.a.createElement("div",{className:"List__background"},n.a.createElement("span",{className:"List__title"},e)),n.a.createElement("img",{src:"https://starwars-visualguide.com/assets/img/categories/".concat("people"!==e?e:"character",".jpg"),alt:"Star Wars"}))})))},B=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"stars"}),n.a.createElement("div",{className:"twinkling"}),n.a.createElement("div",{className:"Catalog"},n.a.createElement(l.a,{to:"/",className:"Logo"},n.a.createElement("div",{className:"Logo__title"},"star"),n.a.createElement("div",{className:"Logo__title"},"wars")),n.a.createElement(o.a,null,n.a.createElement(u.a,{exact:!0,path:"/",render:function(){return n.a.createElement(p.a,{to:"/home",component:W})}}),n.a.createElement(u.a,{exact:!0,path:"/home",component:W}),n.a.createElement(u.a,{exact:!0,path:"/:api",component:U}),n.a.createElement(u.a,{exact:!0,path:"/:api/:id",component:Q}))))},z=(a(45),document.getElementById("root"));c.a.render(n.a.createElement(i.a,{basename:"/react-sw"},n.a.createElement(B,null)),z)}},[[26,1,2]]]);
//# sourceMappingURL=main.8e9e6f55.chunk.js.map