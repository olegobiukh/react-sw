{"version":3,"sources":["api/_helper.js","api/people.js","Common/Pagination/index.js","Common/Pagination/Pagination.js","PeoplePage/index.js","PeoplePage/PeoplePage.js","Page.js","App.js","index.js"],"names":["get","url","arguments","length","undefined","fetch","then","response","json","getAll","_ref","_ref$category","category","_ref$page","page","_ref$search","search","urlParams","URLSearchParams","set","console","log","toString","concat","getById","_ref2","_ref2$category","id","Pagination","withRouter","location","count","_ref$perPage","perPage","pagesCount","Math","ceil","pages","i","push","getSearchWithPage","react_default","a","createElement","className","map","Link","key","to","pathname","PeoplePage","state","config","name","title","isSortable","isSearchable","age","snippet","columns","people","isLoaded","loadPeople","_callee","_this$state","regenerator_default","wrap","_context","prev","next","_this","peopleApi","sent","results","setState","stop","this","updatePageFromURL","props","match","params","document","includes","substring","_this$state2","Fragment","Common_Pagination","person","NavLink","React","Component","Page","data","_this$props$match$par","Object","keys","App","value","currentUrl","window","stateObj","history","pushState","_this2","type","onChange","event","handleFilter","target","defaultChecked","Switch","Route","exact","path","component","ReactDOM","render","BrowserRouter","basename","process","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.43769854.chunk.js","sourcesContent":["const BASE_API_URL = \"https://swapi.co/api\";\n\nexport const get = (url, params = {}) => {\n  return fetch(BASE_API_URL + url).then(response => response.json());\n};\n","import { get } from \"./_helper\";\n\nexport const getAll = ({ category = \"\", page = 1, search = \"\" }) => {\n  const urlParams = new URLSearchParams();\n  urlParams.set(\"page\", page);\n  urlParams.set(\"search\", search);\n  console.log(urlParams.toString());\n  return get(`/${category}/?${urlParams.toString()}`);\n};\n\nexport const getById = ({ category = \"people\", id }) => {\n  // console.log(id);\n  if (category) {\n    return get(`/${category}/${id}`);\n    // return get(`/people/${id}`);\n  }\n};\n","import Pagination from './Pagination';\nexport default Pagination;\n","import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nconst Pagination = ({ location, count, page = 1, perPage = 10 }) => {\n\n  const pagesCount = Math.ceil(count / perPage);\n  const pages = [];\n\n  for (let i = 0; i < pagesCount; i++) {\n    pages.push(i + 1);\n  }\n\n  const getSearchWithPage = (page) => {\n    const urlParams = new URLSearchParams(location.search);\n\n    urlParams.set('page', page);\n\n    return urlParams.toString();\n  };\n\n  return (\n    <div className=\"Pagination\">\n      {pages.map(page => (\n        <Link\n          key={page}\n          to={{\n            pathname: location.pathname,\n            search: getSearchWithPage(page),\n          }}\n        >\n          {page}\n        </Link>\n      ))}\n    </div>\n  );\n};\n\nPagination.propTypes = {\n  count: PropTypes.number.isRequired,\n  page: PropTypes.number,\n  perPage: PropTypes.number,\n};\n\nexport default withRouter(Pagination);\n","import PeoplePage from './PeoplePage';\nexport default PeoplePage;\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n// import queryString from \"query-string\";\n\nimport * as peopleApi from \"../api/people\";\nimport Pagination from \"../Common/Pagination\";\n\nclass PeoplePage extends React.Component {\n  state = {\n    config: {\n      name: {\n        title: [\"name\", \"title\"], // в таблице колонка будет так называться\n        isSortable: true, // Поиск будет проверять эту и последнюю колонки\n        isSearchable: true\n      },\n      age: {\n        title: [\n          \"birth_year\",\n          \"diameter\",\n          \"episode_id\",\n          \"average_height\",\n          \"skin_colors\",\n          \"passengers\"\n        ],\n        isSortable: true // по этой колонке можно сортировать\n      },\n      snippet: {\n        // Только для тех ключей которые есть в columnConfig будут колонки в таблице\n        title: [\"gender\", \"terrain\", \"opening_crawl\", \"manufacturer\"],\n        isSearchable: true // В этой колонке тоже будет происходить поиск query\n      }\n    },\n    columns: {\n      people: [\"name\", \"birth_year\", \"gender\"]\n    },\n\n    isLoaded: false,\n    page: 0,\n    count: 0,\n    people: [],\n    category: \"\",\n    search: \"\"\n  };\n\n  componentDidMount() {\n    this.updatePageFromURL();\n  }\n\n  componentDidUpdate() {\n    this.updatePageFromURL();\n  }\n\n  updatePageFromURL() {\n    const { location } = this.props;\n    const urlParams = new URLSearchParams(location.search);\n    const page = +urlParams.get(\"page\") || 1;\n\n    const category = this.props.match.params.category;\n\n    const search = document.location.search.includes(\"search\")\n      ? document.location.search.substring(8)\n      : \"\";\n    // const search = document.location.search.substring(8);\n\n    if (search !== this.state.search) {\n      this.setState({ page, category, search }, this.loadPeople);\n\n      return;\n    }\n\n    if (category !== this.state.category) {\n      this.setState({ page, category, search }, this.loadPeople);\n\n      return;\n    }\n\n    if (page === this.state.page) {\n      return;\n    }\n\n    this.setState({ page, category, search }, this.loadPeople);\n  }\n\n  loadPeople = async () => {\n    const { search, page, category } = this.state;\n\n    const { count, results: people } = await peopleApi.getAll({\n      category,\n      page,\n      search\n    });\n\n    this.setState({\n      people,\n      count,\n      isLoaded: true\n    });\n  };\n\n  render() {\n    const { people, isLoaded, count, page, category } = this.state;\n    return (\n      <div className=\"PeoplePage\">\n        <h1>People page</h1>\n\n        {isLoaded ? (\n          <>\n            <Pagination count={count} page={page} />\n            <ul>\n              {people.map(person => (\n                <li key={person.name || person.title}>\n                  <NavLink to={`./${category}/${person.url.match(/\\d+/g)[0]}`}>\n                    {person.name || person.title}\n                  </NavLink>\n                </li>\n              ))}\n            </ul>\n          </>\n        ) : (\n          <p>Loading...</p>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default PeoplePage;\n","import React, { Component } from \"react\";\nimport * as peopleApi from \"./api/people\";\n\nclass Page extends Component {\n  state = {\n    isLoaded: false,\n    page: 0,\n    count: 0,\n    people: []\n  };\n\n  componentDidMount() {\n    const { category, id } = this.props.match.params;\n    this.loadPeople(category, id);\n  }\n\n  loadPeople = async (category, id) => {\n    const data = await peopleApi.getById({ category, id });\n\n    this.setState({\n      people: data,\n      isLoaded: true\n    });\n  };\n\n  render() {\n    const data = this.state.people;\n\n    // console.log(data);\n    if (data) {\n      return (\n        <table className=\"table\">\n          <tbody>\n            {Object.keys(data).map(key => {\n              if (\n                data[key].length !== 0 &&\n                !data[key].includes(\"2014\") &&\n                !data[key].includes(\"https\") &&\n                !data[key][0].includes(\"https\")\n              ) {\n                return (\n                  <tr key={key}>\n                    <td>\n                      <b>{key}:</b>\n                    </td>\n                    <td>{data[key]}</td>\n                  </tr>\n                );\n              }\n            })}\n          </tbody>\n        </table>\n      );\n    } else {\n      return <>Loading</>;\n    }\n  }\n}\n\nexport default Page;\n","import React, { Component } from \"react\";\nimport { NavLink, Route, Switch } from \"react-router-dom\";\n\nimport PeoplePage from \"./PeoplePage\";\nimport Page from \"./Page\";\n\nimport \"./App.css\";\n\nclass App extends Component {\n  state = {\n    search: \"\"\n  };\n\n  handleFilter(value, search) {\n    this.setState({ search });\n    const currentUrl = window.location.pathname.match(/\\w+/g);\n    const stateObj = { search: search };\n    const url =\n      search.length === 0\n        ? currentUrl\n        : currentUrl && currentUrl + \"?search=\" + search;\n\n    window.history.pushState(stateObj, \"url\", url);\n  }\n\n  render() {\n    const search = this.state.search;\n\n    return (\n      <div className=\"App\">\n        <h1>Star Wars</h1>\n        <input\n          className=\"Query\"\n          type=\"text\"\n          onChange={event => {\n            this.handleFilter(\"query\", event.target.value);\n          }}\n          defaultChecked\n        />\n        <NavLink to=\"/people\">People</NavLink>\n        <NavLink to=\"/planets\">Planets</NavLink>\n        <NavLink to=\"/species\">Species</NavLink>\n        <NavLink to=\"/vehicles\">Vehicles</NavLink>\n        <NavLink to=\"/starships\">Starships</NavLink>\n        <section>\n          <Switch>\n            <Route\n              history={this.props.history}\n              exact\n              path=\"/:category\"\n              component={PeoplePage}\n            />\n            <Route exact path=\"/:category/:id\" component={Page} />\n          </Switch>\n        </section>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nReactDOM.render(\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <App />\n  </BrowserRouter>,\n\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}